import{c,j as a,L as n,a as _,b as v,r as l,l as m,e as x}from"./index-fb074e3b.js";import{s as j}from"./selectOfferPageData-c25f1342.js";const u=()=>a.jsx("nav",{className:"header__nav",children:a.jsx("ul",{className:"header__nav-list",children:a.jsx("li",{className:"header__nav-item user",children:a.jsxs(n,{className:"header__nav-link header__nav-link--profile",to:"/login",children:[a.jsx("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),a.jsx("span",{className:"header__login",children:"Sign in"})]})})})}),N=()=>{const r=c(o=>o),{profile:e,favorites:t}=j(r),s=_(),i=v(),d=l.useCallback(()=>{s(m()).then(()=>i("/login"))},[s,i]);l.useEffect(()=>{s(x())},[s]);const h=l.useMemo(()=>Object.values(t).flat(1).length,[t]);return a.jsx("nav",{className:"header__nav",children:a.jsxs("ul",{className:"header__nav-list",children:[a.jsx("li",{className:"header__nav-item user",children:a.jsxs(n,{className:"header__nav-link header__nav-link--profile",to:"/favorites",children:[a.jsx("div",{className:"header__avatar-wrapper user__avatar-wrapper",children:a.jsx("img",{src:e==null?void 0:e.avatarUrl,alt:"avatar",className:"user__avatar"})}),a.jsx("span",{className:"header__user-name user__name",children:e==null?void 0:e.email}),a.jsx("span",{className:"header__favorite-count",children:h})]})}),a.jsx("li",{className:"header__nav-item",children:a.jsx("a",{className:"header__nav-link",href:"#",onClick:d,children:a.jsx("span",{className:"header__signout",children:"Sign out"})})})]})})},f=()=>{const{authorizationStatus:r}=c(e=>e.auth);return a.jsx("header",{className:"header",children:a.jsx("div",{className:"container",children:a.jsxs("div",{className:"header__wrapper",children:[a.jsx("div",{className:"header__left",children:a.jsx(n,{className:"header__logo-link header__logo-link--active",to:"/",children:a.jsx("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})}),r?a.jsx(N,{}):a.jsx(u,{})]})})})};export{f as H};
