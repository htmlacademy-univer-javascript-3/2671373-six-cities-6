import{j as s,L as f,u as j,a as N,b as v,c as b,r as o,g as y,d as P,e as L}from"./index-8c1a8c3d.js";import{c as S,L as C,O as w}from"./LoadingWrapper-c2d80867.js";import{M}from"./Map-93442fcb.js";const d=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"],O={Amsterdam:{name:"Amsterdam",location:{latitude:52.3909553943508,longitude:4.85309666406198,zoom:5}},Brussels:{name:"Brussels",location:{latitude:50.847767,longitude:4.349394,zoom:5}},Cologne:{name:"Cologne",location:{latitude:50.935994,longitude:6.960506,zoom:5}},Dusseldorf:{name:"Dusseldorf",location:{latitude:51.2277411,longitude:6.7734556,zoom:5}},Hamburg:{name:"Hamburg",location:{latitude:53.55833,longitude:10.025,zoom:5}},Paris:{name:"Paris",location:{latitude:48.8534,longitude:2.3488,zoom:5}}},z=c=>{const{active:t,locations:l}=c;return s.jsx("div",{className:"tabs",children:s.jsx("section",{className:"locations container",children:s.jsx("ul",{className:"locations__list tabs__list",children:l.map(a=>s.jsx("li",{className:"locations__item",children:s.jsx(f,{className:S("locations__item-link tabs__item",t===a&&"tabs__item--active"),to:`?city=${a}`,children:s.jsx("span",{children:a})})},a))})})})},A=()=>{const[c]=j(),t=N(),l=v(),{offers:a,isLoading:m}=b(e=>e.offers),[i,p]=o.useState(c.get("city")||d[0]),[_,u]=o.useState(void 0);o.useEffect(()=>{const e=c.get("city");e&&p(e)},[c]),o.useEffect(()=>{t(y())},[i,t]);const h=async(e,x)=>{const r=(await t(P({id:e,favorite:x}))).payload;"status"in r&&r.status===401&&l("/login"),await t(L())},n=o.useMemo(()=>a[i]||[],[a,i]),g=o.useMemo(()=>n.map(e=>e.location),[n]);return s.jsx("div",{className:"page page--gray page--main",children:s.jsxs("main",{className:"page__main page__main--index",children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(z,{locations:d,active:i}),s.jsx(C,{isLoading:m,children:s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container container",children:[s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[n.length," places to stay in ",i]}),s.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[s.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),s.jsxs("span",{className:"places__sorting-type",tabIndex:0,children:["Popular",s.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:s.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),s.jsxs("ul",{className:"places__options places__options--custom places__options--opened",children:[s.jsx("li",{className:"places__option places__option--active",tabIndex:0,children:"Popular"}),s.jsx("li",{className:"places__option",tabIndex:0,children:"Price: low to high"}),s.jsx("li",{className:"places__option",tabIndex:0,children:"Price: high to low"}),s.jsx("li",{className:"places__option",tabIndex:0,children:"Top rated first"})]})]}),s.jsx("div",{className:"cities__places-list places__list tabs__content",children:s.jsx(w,{offers:n,changeFavoriteStatus:h})})]}),s.jsx("div",{className:"cities__right-section",children:s.jsx(M,{city:O[i],points:g,selectedPoint:_,setSelectedPoint:u})})]})})})]})})},H=A;export{H as MainPage};
